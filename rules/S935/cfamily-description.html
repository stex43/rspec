<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_an_issue">Why is this an issue?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every call to a function with a non-void return type is expected to return some value. Including a return path in a non-void function that does not explicitly return a value results in undefined behavior.</p>
</div>
<div class="paragraph">
<p>Conversely, every call to a function with a void return type is expected to not return any value. Returning a value from a void function probably indicates a programming error.</p>
</div>
<div class="sect2">
<h3 id="_noncompliant_code_example">Noncompliant code example</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">int my_func (int a)
{
  if (a &gt; 100)
  {
    return; // Noncompliant
  }

  if (a &gt; 80)
  {
    throw new Exception(); // Compliant
  }

  // Noncompliant
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compliant_solution">Compliant solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">int my_func (int a)
{
  if (a &gt; 100)
  {
    return 12;
  }

  if (a &gt; 80)
  {
    throw new Exception();
  }

  return a;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions">Exceptions</h3>
<div class="paragraph">
<p>This rule doesn&#8217;t raise an exception when the <code>return</code> statement for a <code>void</code> function, is itself a <code>void</code> expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void foo() {
  // Do stuff ...
}

void bar() {
  return foo();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Furthermore, the issue is not raised for the coroutines, introduced in C&#43;&#43;20, that always declare coroutine object as a return type,
but returned object is implicitly created by compiler. The coroutine body itself may never contains <code>return</code> statement (the use of it is disallowed),
and <code>co_return</code> is used for coroutine that returns a value (define <code>return_value</code> in promise-type).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a data-rspec-id="S6369" class="rspec-auto-link">S6369</a> - Coroutine should have co_return on each execution path or provide return_void</p>
</li>
<li>
<p>MISRA C:2004, 16.8 - All exit paths from a function with non-void return type shall have an explicit return statement with an expression</p>
</li>
<li>
<p>MISRA C&#43;&#43;:2008, 8-4-3 - All exit paths from a function with non-void return type shall have an explicit return statement with an expression</p>
</li>
<li>
<p>MISRA C:2012, 17.4 - All exit paths from a function with non-void return type shall have an explicit return statement with an expression</p>
</li>
<li>
<p><a href="https://cwe.mitre.org/data/definitions/394">MITRE, CWE-394</a> - Unexpected Status Code or Return Value</p>
</li>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/m9YxBQ">CERT, MSC37-C.</a> - Ensure that control never reaches the end of a non-void function</p>
</li>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/EXs-BQ">CERT, MSC52-CPP.</a> - Value-returning functions must return a value from all exit paths</p>
</li>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/Cns-BQ">CERT, MSC53-CPP.</a> - Do not return from a function declared [[noreturn]]</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>Add an explicit "return" statement with an expression here.</p>
</li>
<li>
<p>Remove the value from this return.</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s3801">is related to: <a data-rspec-id="S3801" class="rspec-auto-link">S3801</a></h3>

</div>
<div class="sect2">
<h3 id="_supercedes_s2734">supercedes: <a data-rspec-id="S2734" class="rspec-auto-link">S2734</a></h3>

</div>
<div class="sect2">
<h3 id="_on_10_dec_2014_233745_evgeny_mandrikov_wrote">on 10 Dec 2014, 23:37:45 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I think that we can safely add link to <a href="https://www.securecoding.cert.org/confluence/x/ZoCKC">CERT MSC36-CPP</a> ? WDYT?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_11_dec_2014_124347_ann_campbell_wrote">on 11 Dec 2014, 12:43:47 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Agreed, [~evgeny.mandrikov]. Done</p>
</div>
</div>
</div>
</div>